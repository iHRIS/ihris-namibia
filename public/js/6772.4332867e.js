"use strict";(self["webpackChunkiHRIS_v5"]=self["webpackChunkiHRIS_v5"]||[]).push([[6772],{3205:function(e,t,s){s.d(t,{Z:function(){return a}});var r=s(8085),i=s(3325),a=(0,i.Z)(r.Z).extend({name:"v-subheader",props:{inset:Boolean},render(e){return e("div",{staticClass:"v-subheader",class:{"v-subheader--inset":this.inset,...this.themeClasses},attrs:this.$attrs,on:this.$listeners},this.$slots.default)}})},4350:function(e,t,s){s.d(t,{Z:function(){return o}});var r=s(5978),i=s(3325);const a=(0,i.Z)(r.Z);var o=a.extend({name:"v-textarea",props:{autoGrow:Boolean,noResize:Boolean,rowHeight:{type:[Number,String],default:24,validator:e=>!isNaN(parseFloat(e))},rows:{type:[Number,String],default:5,validator:e=>!isNaN(parseInt(e,10))}},computed:{classes(){return{"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle,...r.Z.options.computed.classes.call(this)}},noResizeHandle(){return this.noResize||this.autoGrow}},watch:{autoGrow(e){this.$nextTick((()=>{var t;e?this.calculateInputHeight():null==(t=this.$refs.input)||t.style.removeProperty("height")}))},lazyValue(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)},rowHeight(){this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted(){setTimeout((()=>{this.autoGrow&&this.calculateInputHeight()}),0)},methods:{calculateInputHeight(){const e=this.$refs.input;if(!e)return;e.style.height="0";const t=e.scrollHeight,s=parseInt(this.rows,10)*parseFloat(this.rowHeight);e.style.height=Math.max(s,t)+"px"},genInput(){const e=r.Z.options.methods.genInput.call(this);return e.tag="textarea",delete e.data.attrs.type,e.data.attrs.rows=this.rows,e},onInput(e){r.Z.options.methods.onInput.call(this,e),this.autoGrow&&this.calculateInputHeight()},onKeyDown(e){this.isFocused&&13===e.keyCode&&e.stopPropagation(),this.$emit("keydown",e)}}})},4843:function(e,t,s){s.r(t),s.d(t,{default:function(){return P}});var r=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("v-container",{attrs:{"grid-list-xs":""}},[s("v-overlay",{attrs:{value:e.overlay}},[s("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}}),s("v-btn",{attrs:{icon:""},on:{click:function(t){e.overlay=!1}}},[s("v-icon",[e._v("mdi-close")])],1)],1),s("v-overlay",{attrs:{value:e.overlayUnclosed}},[s("v-progress-circular",{attrs:{color:"primary",indeterminate:"",size:"50"}})],1),s("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.carryForwardDialog,callback:function(t){e.carryForwardDialog=t},expression:"carryForwardDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Leave Carry Forward")]),s("v-card-text",[e._v(" Are you sure that you want to request carrying "+e._s(e.annualLeave.balanceCarried)+" days from leave cycle "+e._s(e.annualLeave.previousPeriod)+" to leave cycle "+e._s(e.annualLeave.currentPeriod)+" ")]),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{color:"error"},on:{click:function(t){e.carryForwardDialog=!1}}},[e._v("Cancel")]),s("v-spacer"),s("v-btn",{on:{click:e.createCarryForwardRequest}},[e._v("Yes, Proceed")])],1)],1)],1),s("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.carryForwardActionDialog,callback:function(t){e.carryForwardActionDialog=t},expression:"carryForwardActionDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Leave Carry Forward")]),s("v-card-text",[e._v(" Select action for carrying "+e._s(e.annualLeave.balanceCarried)+" days from leave cycle "+e._s(e.annualLeave.previousPeriod)+" to leave cycle "+e._s(e.annualLeave.currentPeriod)+" "),s("v-select",{attrs:{items:e.requestActions,label:"Select Action"},model:{value:e.requestAction,callback:function(t){e.requestAction=t},expression:"requestAction"}})],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{color:"error"},on:{click:function(t){e.carryForwardActionDialog=!1}}},[e._v("Cancel")]),s("v-spacer"),s("v-btn",{attrs:{disabled:!e.requestAction},on:{click:e.createCarryForwardAction}},[e._v("Proceed and Save")])],1)],1)],1),s("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.specialStudyExtendDialog,callback:function(t){e.specialStudyExtendDialog=t},expression:"specialStudyExtendDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Special Study Extension")]),s("v-card-text",[e._v(" Current End Date "),s("b",[e._v(e._s(e.$moment(e.leaveRequest.endDate).format("Do MMMM YYYY")))]),e.extensionDate&&(e.$moment(e.leaveRequest.endDate).isAfter(e.extensionDate)||e.leaveRequest.endDate===e.extensionDate)?[s("div",{staticStyle:{color:"red"}},[e._v(" Extended date must be after "+e._s(e.$moment(e.leaveRequest.endDate).format("Do MMMM YYYY"))+" ")])]:e._e(),s("v-row",[s("v-col",{attrs:{cols:"6"}},[s("v-menu",{attrs:{"close-on-content-click":!1,"nudge-right":40,transition:"scale-transition","offset-y":"","min-width":"290px"},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[s("v-text-field",e._g({attrs:{label:"Extend To Date*","prepend-icon":"mdi-event",readonly:""},model:{value:e.extensionDateFormatted,callback:function(t){e.extensionDateFormatted=t},expression:"extensionDateFormatted"}},r))]}}]),model:{value:e.extensionDateMenu,callback:function(t){e.extensionDateMenu=t},expression:"extensionDateMenu"}},[s("v-date-picker",{on:{change:function(t){e.extensionDateFormatted=e.$moment(e.extensionDate).format("DD-MM-YYYY")},input:function(t){e.extensionDateMenu=!1}},model:{value:e.extensionDate,callback:function(t){e.extensionDate=t},expression:"extensionDate"}})],1)],1),s("v-col",{attrs:{cols:"6"}},[s("v-textarea",{attrs:{label:"Extension Reasons",outlined:"","hide-details":"auto",dense:""},model:{value:e.extensionReason,callback:function(t){e.extensionReason=t},expression:"extensionReason"}})],1)],1),s("br"),s("b",[s("v-icon",[e._v("mdi-information-outline")]),e._v(" This extension will be activated after the HR supervisor has approved")],1)],2),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{color:"error"},on:{click:function(t){e.specialStudyExtendDialog=!1}}},[e._v("Cancel")]),s("v-spacer"),s("v-btn",{attrs:{disabled:!e.extensionReason||!e.extensionDate||e.$moment(e.leaveRequest.endDate).isAfter(e.extensionDate)||e.leaveRequest.endDate===e.extensionDate},on:{click:e.createSpecialStudyExtensionReq}},[e._v(" Make Extension Request ")])],1)],1)],1),s("v-dialog",{attrs:{transition:"dialog-top-transition","max-width":"600"},model:{value:e.specialStudyExtensionActionDialog,callback:function(t){e.specialStudyExtensionActionDialog=t},expression:"specialStudyExtensionActionDialog"}},[s("v-card",[s("v-toolbar",{attrs:{color:"primary",dark:""}},[e._v("Requesting Special Study Extension")]),s("v-card-text",[e._v(" Select action for extending special study leave from "+e._s(e.$moment(e.specialStudyExtensionRequest.fromDate).format("Do MMMM YYYY"))+" to "+e._s(e.$moment(e.specialStudyExtensionRequest.toDate).format("Do MMMM YYYY"))+" "),s("v-select",{attrs:{items:e.requestActions,label:"Select Action"},model:{value:e.requestAction,callback:function(t){e.requestAction=t},expression:"requestAction"}})],1),s("v-card-actions",{staticClass:"justify-end"},[s("v-btn",{attrs:{color:"error"},on:{click:function(t){e.specialStudyExtensionActionDialog=!1}}},[e._v("Cancel")]),s("v-spacer"),s("v-btn",{attrs:{disabled:!e.requestAction},on:{click:e.createSpecialStudyExtensionAction}},[e._v("Proceed and Save")])],1)],1)],1),s("v-navigation-drawer",{staticClass:"primary darken-1 white--text",staticStyle:{"z-index":"3"},attrs:{app:"",clipped:"",permanent:"",right:""}},[s("v-list",{staticClass:"white--text"},[s("v-list-item",[s("v-btn",{staticClass:"secondary",attrs:{dark:""},on:{click:function(t){return e.$router.push("/resource/view/practitioner/"+e.practitionerId)}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-eye")]),s("span",[e._v("View Health Profession")])],1)],1),e.canRequestCarryForward?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.carryForwardDialog=!0}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Request Leave Carry Forward")])],1)],1):e._e(),e.canApproveRequestCarryForward?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.carryForwardActionDialog=!0}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Approve Carry Forward Request")])],1)],1):e._e(),e.canApproveRequestSpecialStudyExt?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){e.specialStudyExtensionActionDialog=!0}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Approve Extension Request")])],1)],1):e._e(),e.canAddFirstLevelApproval?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.firstLevelApprQuestionnaire)}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddSecondLevelApproval?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.secondLevelApprQuestionnaire)}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddThirdLevelApproval?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.thirdLevelApprQuestionnaire)}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Add Approval")])],1)],1):e._e(),e.canAddFourthLevelApproval?s("v-list-item",[s("v-btn",{staticClass:"primary",attrs:{dark:"",small:""},on:{click:function(t){return e.$router.push(e.fourthLevelApprQuestionnaire)}}},[s("v-icon",{attrs:{light:"",left:""}},[e._v("mdi-plus")]),s("span",[e._v("Add Approval")])],1)],1):e._e()],1)],1),s("v-row",[s("v-col",[s("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.leaveDetailsHeaders,items:e.leaveDetails,"items-per-page":20}}),s("br"),e.carryForwardRequest.fromPeriod?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Leave Carry Forward Request ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("From Leave Cycle")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.fromPeriod)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("To Leave Cycle")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.toPeriod)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Request Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.requestDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.carryForwardRequest.status.display)+" ")])],1)],1)],1):e._e(),e.specialStudyExtensionRequest.id&&"loading"!==e.specialStudyExtensionRequest.id?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" Special Study Extension Request ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("From Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.fromDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("To Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.toDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Request Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.requestDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Reasons")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.description)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.status.display)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Requested By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.requestor.name)+" ")])],1),s("v-divider"),e.specialStudyExtensionRequest.processor.id?s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.specialStudyExtensionRequest.processor.name)+" ")])],1):e._e()],1)],1):e._e(),e.leaveRequest.category?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"primary darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.leaveRequest.category)+" Request ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Leave Category")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.category)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Start Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.startDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("End Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.endDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Return Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.returnDate)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Days")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.days)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Status")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.leaveRequest.status)+" ")])],1)],1),s("v-card-actions",[s("v-spacer"),e.canExtendDays?s("v-btn",{attrs:{color:"secondary"},on:{click:function(t){e.specialStudyExtendDialog=!0}}},[e._v(" Extend Days ")]):e._e()],1)],1):e._e(),e.firstLevelApproval.id&&"loading"!==e.firstLevelApproval.id?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.firstLevelApproval.title)+" ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.status)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.date)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.description)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.firstLevelApproval.user.name)+" ")])],1)],1)],1):e._e(),e.secondLevelApproval.id&&"loading"!==e.secondLevelApproval.id?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.secondLevelApproval.title)+" ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.status)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.date)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.description)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.secondLevelApproval.user.name)+" ")])],1)],1)],1):e._e(),e.thirdLevelApproval.id&&"loading"!==e.thirdLevelApproval.id?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.thirdLevelApproval.title)+" ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.status)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.date)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.description)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.thirdLevelApproval.user.name)+" ")])],1)],1)],1):e._e(),e.fourthLevelApproval.id&&"loading"!==e.fourthLevelApproval.id?s("v-card",{staticClass:"mx-auto",attrs:{"max-width":"700",outlined:""}},[s("v-card-title",{staticClass:"accent darken-1 white--text text-uppercase font-weight-bold"},[e._v(" "+e._s(e.fourthLevelApproval.title)+" ")]),s("v-card-text",{staticClass:"my-3"},[s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.fourthLevelApproval.status)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Action Date")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.fourthLevelApproval.date)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Description")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.fourthLevelApproval.description)+" ")])],1),s("v-divider"),s("v-row",{staticClass:"justify-space-between"},[s("v-col",{attrs:{cols:"4"}},[s("span",{staticClass:"font-weight-bold"},[e._v("Processed By")])]),s("v-col",{attrs:{cols:"8"}},[e._v(" "+e._s(e.fourthLevelApproval.user.name)+" ")])],1)],1)],1):e._e()],1),s("v-col",{attrs:{cols:"3"}},[s("br"),"specialstudy"===e.leaveRequest.categoryid?s("special-study-leave-request-stepper",{attrs:{step:e.step,noHRAppr:!e.thirdLevelApproval.id,noHRSupervisorAppr:!e.secondLevelApproval.id}}):s("leave-request-stepper",{attrs:{step:e.step,noSupervisorAppr:!e.firstLevelApproval.id,noSupervisorSupervisorAppr:!e.secondLevelApproval.id,noHRApproval:!e.thirdLevelApproval.id,noEDApproval:!e.fourthLevelApproval.id,steps:e.totalSteps}})],1)],1)],1)},i=[];const a=s(7673);var o={props:["queries"],data(){return{overlay:!1,overlayUnclosed:!1,loading:!1,carryForwardDialog:!1,carryForwardActionDialog:!1,specialStudyExtendDialog:!1,specialStudyExtensionActionDialog:!1,practitionerId:"",leaveRequest:{startDate:"",category:"",categoryid:""},firstLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},secondLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},thirdLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},fourthLevelApproval:{title:"",id:"loading",statuscode:"",user:{id:"",name:""}},carryForwardRequest:{id:"loading",status:{}},specialStudyExtensionRequest:{id:"loading",status:{},requestor:{id:"",name:""},processor:{id:"",name:""}},noSupervisor:!1,noSupervisorSupervisor:!1,noHRSupervisor:!1,supervisor:"",supervisorSupervisor:"",HRSupervisor:"",step:1,leaveDetails:[],annualLeave:{},leaveDetailsHeaders:[{text:"Period",value:"period"},{text:"Category",value:"category"},{text:"Leave Days",value:"maxDays"},{text:"Accrued",value:"accrued"},{text:"Days on Leave",value:"daysOnLeave"},{text:"Expired",value:"expired"},{text:"Balance",value:"balance"}],requestActions:[{text:"Pending",value:"pending"},{text:"Approve",value:"approved"},{text:"Reject",value:"rejected"}],requestAction:"",extensionDate:"",extensionDateFormatted:"",extensionDateMenu:!1,extensionReason:"",totalSteps:4}},computed:{canExtendDays(){if(this.specialStudyExtensionRequest.id&&"loading"!==this.specialStudyExtensionRequest.id)return!1;if("specialstudy"===this.leaveRequest.categoryid&&"approved"===this.leaveRequest.statuscode){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));if(e&&"Basic/na-hr-manager"===e.valueReference.reference)return!0}return!1},firstLevelApprQuestionnaire(){return"specialstudy"===this.leaveRequest.categoryid?"/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id:"/questionnaire/supervisor-leave-approval/supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},secondLevelApprQuestionnaire(){return"specialstudy"===this.leaveRequest.categoryid?"/questionnaire/hr-supervisor-leave-approval/hr-supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id:"/questionnaire/supervisor-supervisor-leave-approval/supervisor-supervisor-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},thirdLevelApprQuestionnaire(){return"/questionnaire/hr-leave-approval/hr-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},fourthLevelApprQuestionnaire(){return"/questionnaire/ed-leave-approval/ed-leave-approval?practitioner="+this.practitionerId+"&leaverequest="+this.queries.id},canAddFirstLevelApproval(){if(this.firstLevelApproval.id)return!1;if("specialstudy"===this.leaveRequest.categoryid){let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));if(e&&"Basic/na-hr-manager"===e.valueReference.reference)return!0}else{let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));if(e&&e.valueReference.reference===this.supervisor)return!0}return!1},canAddSecondLevelApproval(){if(!this.firstLevelApproval.id||"loading"===this.firstLevelApproval.id||"rejected"===this.firstLevelApproval.statuscode||this.secondLevelApproval.id)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));if(!e)return console.error("User not associated with any practitioner"),!1;if("specialstudy"===this.leaveRequest.categoryid){if(e.valueReference.reference===this.HRSupervisor)return!0}else if(e.valueReference.reference===this.supervisorSupervisor)return!0;return!1},canAddThirdLevelApproval(){if(!this.secondLevelApproval.id||"loading"===this.secondLevelApproval.id||"rejected"===this.secondLevelApproval.statuscode||this.thirdLevelApproval.id)return!1;if("specialstudy"===this.leaveRequest.categoryid)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/na-hr-manager"!==e.valueReference.reference||!this.secondLevelApproval.id||this.thirdLevelApproval.id)},canAddFourthLevelApproval(){if(!this.firstLevelApproval.id||"loading"===this.firstLevelApproval.id||!this.secondLevelApproval.id||"loading"===this.secondLevelApproval.id||"rejected"===this.secondLevelApproval.statuscode||"loading"===this.thirdLevelApproval.id||"rejected"===this.thirdLevelApproval.statuscode||this.fourthLevelApproval.id)return!1;if("unpaidauthorized"!==this.leaveRequest.categoryid||"unpaidauthorized"===this.leaveRequest.categoryid&&this.leaveRequest.days<90)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/na-executive-director"!==e.valueReference.reference)},canRequestCarryForward(){if(this.carryForwardRequest.id&&"loading"!==this.carryForwardRequest.id||"loading"===this.carryForwardRequest.id)return!1;if(this.leaveDetails.length){let e=this.annualLeave.currentPeriod.split("/")[0],t=this.$moment().diff(e,"months");if(t>6||this.annualLeave.balanceCarried<=0||this.annualLeave.balanceCarried<=this.annualLeave.expired)return!1;if(this.annualLeave.maxDays)return!0}return!1},canApproveRequestCarryForward(){if(!this.carryForwardRequest.id||"loading"===this.carryForwardRequest.id)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-assign-role"===e.url));return!(!e||"Basic/exec-manager"!==e.valueReference.reference||"approved"===this.carryForwardRequest.status.code)},canApproveRequestSpecialStudyExt(){if(!this.specialStudyExtensionRequest.id||"loading"===this.specialStudyExtensionRequest.id)return!1;if("approved"===this.specialStudyExtensionRequest.status.code)return!1;let e=this.$store.state.user.obj.resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url));return e?e.valueReference.reference===this.HRSupervisor:(console.error("User not associated with any practitioner"),!1)}},methods:{getLeaveCaryForward(){return new Promise((e=>{let t={practitioner:"Practitioner/"+this.practitionerId,_profile:"http://ihris.org/fhir/StructureDefinition/leave-carry-forward-request-profile",toleaveperiod:this.annualLeave.currentPeriod};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((async t=>{t&&t.entry&&t.entry.length?this.populateCarryForward(t.entry[0].resource):this.carryForwardRequest.id="",e()}))))}))},populateCarryForward(e){this.carryForwardRequest.id=e.id,this.carryForwardRequest.fromPeriod=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/from-leave-period"===e.url)).valueString,this.carryForwardRequest.toPeriod=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/to-leave-period"===e.url)).valueString,this.carryForwardRequest.requestDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/request-date"===e.url)).valueDate,this.carryForwardRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/carry-approval-status"===e.url)).valueCoding},getSpecialStudyExtensionRequest(){return new Promise((e=>{let t={practitioner:"Practitioner/"+this.practitionerId,_profile:"http://ihris.org/fhir/StructureDefinition/special-study-extension-request-profile",leaverequest:"Basic/"+this.queries.id};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((async t=>{if(t&&t.entry&&t.entry.length){let e=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/requested-by"===e.url));e&&await this.getHRSupervisor(e.valueReference.reference),this.populateSpecialStudyExtensionReq(t.entry[0].resource)}else this.specialStudyExtensionRequest.id="";e()}))))}))},populateSpecialStudyExtensionReq(e){this.specialStudyExtensionRequest.id=e.id,this.specialStudyExtensionRequest.fromDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/from-date"===e.url)).valueDate,this.specialStudyExtensionRequest.toDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/to-date"===e.url)).valueDate,this.specialStudyExtensionRequest.requestDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/request-date"===e.url)).valueDate,this.specialStudyExtensionRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/special-study-extension-approval-status"===e.url)).valueCoding,this.specialStudyExtensionRequest.description=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url)).valueString;let t=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/requested-by"===e.url));t&&(this.specialStudyExtensionRequest.requestor.id=t.valueReference.reference,fetch("/site/leave/leaveProcessor/"+t.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.specialStudyExtensionRequest.requestor.name=e.name})))));let s=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/processed-by"===e.url));s&&(this.specialStudyExtensionRequest.processor.id=s.valueReference.reference,fetch("/site/leave/leaveProcessor/"+s.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.specialStudyExtensionRequest.processor.name=e.name})))))},getLeaveDetails(){return new Promise((e=>{fetch("/site/leave/balance/"+this.practitionerId).then((t=>t.json().then((async t=>{this.leaveDetails=t,"annual"===this.leaveRequest.categoryid?(this.annualLeave=this.leaveDetails.find((e=>"annual"===e.categoryid)),await this.getLeaveCaryForward(),e()):"specialstudy"===this.leaveRequest.categoryid?(await this.getSpecialStudyExtensionRequest(),e()):e()}))))}))},getSupervisor(){return new Promise((e=>{fetch("/site/leave/getSupervisor/"+this.practitionerId+"?startDate="+this.leaveRequest.startDate).then((t=>t.json().then((async t=>{t.supervisor?(this.supervisor=t.supervisor,fetch("/site/leave/getSupervisor/"+this.supervisor.split("/")[1]+"?startDate="+this.leaveRequest.startDate).then((t=>t.json().then((async t=>{t.supervisor?this.supervisorSupervisor=t.supervisor:this.noSupervisorSupervisor=!0,e()}))))):(this.noSupervisor=!0,e())}))))}))},getHRSupervisor(e){return new Promise((t=>{fetch("/site/leave/getUserSupervisor/"+e.split("/")[1]).then((e=>e.json().then((e=>{e.supervisor?this.HRSupervisor=e.supervisor:this.noHRSupervisor=!0,t()}))))}))},populateCarry(){this.overlayUnclosed=!0,fetch("/site/leave/populateCarry/"+this.practitionerId).then((()=>{Promise.all([this.getLeaveDetails(),this.getSupervisor(),this.getFirstLevelApproval()]).then((()=>{this.overlayUnclosed=!1}))}))},getLeave(){fetch("/fhir/Basic/"+this.queries.id).then((e=>e.json().then((async e=>{this.practitionerId=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-practitioner-reference"===e.url)).valueReference.reference,this.practitionerId=this.practitionerId.split("/")[1],this.leaveRequest.id=this.queries.id,this.leaveRequest.startDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/start-date"===e.url)).valueDate,this.leaveRequest.endDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/end-date"===e.url)).valueDate,this.leaveRequest.returnDate=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/return-date"===e.url)).valueDate,this.leaveRequest.days=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-days"===e.url))?.valueInteger,this.leaveRequest.status=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-status"===e.url)).valueCoding.display,this.leaveRequest.statuscode=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-status"===e.url)).valueCoding.code;let t=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/leave-category"===e.url)).valueReference.reference;this.leaveRequest.categoryid=t.split("/")[1],await fetch("/fhir/"+t).then((e=>e.json().then((async e=>{this.leaveRequest.category=e.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ihris-basic-name"===e.url)).valueString})))),"unpaidauthorized"===this.leaveRequest.categoryid&&this.leaveRequest.days>=90&&(this.totalSteps=5),"Approved"===this.leaveRequest.status&&(this.step=this.totalSteps),this.populateCarry()}))))},getFirstLevelApproval(){return new Promise((e=>{let t,s={leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};"specialstudy"===this.leaveRequest.categoryid?(this.firstLevelApproval.title="HR Approval",s._profile="http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",t="http://ihris.org/fhir/StructureDefinition/hr-leave-status"):(this.firstLevelApproval.title="Immediate Supervisor Approval",s._profile="http://ihris.org/fhir/StructureDefinition/supervisor-leave-approval-profile",t="http://ihris.org/fhir/StructureDefinition/supervisor-leave-status"),fetch("/fhir/Basic?"+a.stringify(s)).then((s=>s.json().then((async s=>{if(s.entry&&s.entry.length){this.step!=this.totalSteps&&(this.step=2),this.firstLevelApproval.id=s.entry[0].resource.id,this.firstLevelApproval.status=s.entry[0].resource.extension.find((e=>e.url===t)).valueCoding.display,this.firstLevelApproval.statuscode=s.entry[0].resource.extension.find((e=>e.url===t)).valueCoding.code,this.firstLevelApproval.date=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let r=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));r&&(this.firstLevelApproval.description=r.valueString);let i=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));i&&(this.firstLevelApproval.user.id=i.valueReference.reference,fetch("/site/leave/leaveProcessor/"+i.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.firstLevelApproval.user.name=e.name})))),"specialstudy"===this.leaveRequest.categoryid&&await this.getHRSupervisor(i.valueReference.reference)),await this.getSecondLevelApproval(),e()}else this.firstLevelApproval.id="",this.secondLevelApproval.id="",this.thirdLevelApproval.id="",this.fourthLevelApproval.id="",e()}))))}))},getSecondLevelApproval(){return new Promise((e=>{let t,s={leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};"specialstudy"===this.leaveRequest.categoryid?(this.secondLevelApproval.title="HR Supervisor Approval",s._profile="http://ihris.org/fhir/StructureDefinition/hr-supervisor-leave-approval-profile",t="http://ihris.org/fhir/StructureDefinition/hr-supervisor-leave-status"):(this.secondLevelApproval.title="Supervisor's Supervisor Approval",s._profile="http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-approval-profile",t="http://ihris.org/fhir/StructureDefinition/supervisor-supervisor-leave-status"),fetch("/fhir/Basic?"+a.stringify(s)).then((s=>s.json().then((async s=>{if(s.entry&&s.entry.length){this.step!=this.totalSteps&&(this.step=3),this.secondLevelApproval.id=s.entry[0].resource.id,this.secondLevelApproval.status=s.entry[0].resource.extension.find((e=>e.url===t)).valueCoding.display,this.secondLevelApproval.statuscode=s.entry[0].resource.extension.find((e=>e.url===t)).valueCoding.code,this.secondLevelApproval.date=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let r=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));r&&(this.secondLevelApproval.description=r.valueString);let i=s.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));i&&(this.secondLevelApproval.user.id=i.valueReference.reference,fetch("/site/leave/leaveProcessor/"+i.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.secondLevelApproval.user.name=e.name}))))),await this.getThirdLevelApproval(),e()}else this.secondLevelApproval.id="",this.thirdLevelApproval.id="",this.fourthLevelApproval.id="",e()}))))}))},getThirdLevelApproval(){return new Promise((e=>{if("specialstudy"===this.leaveRequest.categoryid)return this.thirdLevelApproval.id="",e();this.thirdLevelApproval.title="HR Approval";let t={_profile:"http://ihris.org/fhir/StructureDefinition/hr-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((async t=>{if(t.entry&&t.entry.length){this.step!=this.totalSteps&&(this.step=4),this.thirdLevelApproval.id=t.entry[0].resource.id,this.thirdLevelApproval.status=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===e.url)).valueCoding.display,this.thirdLevelApproval.statuscode=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/hr-leave-status"===e.url)).valueCoding.code,this.thirdLevelApproval.date=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let s=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));s&&(this.thirdLevelApproval.description=s.valueString);let r=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));r&&(this.thirdLevelApproval.user.id=r.valueReference.reference,fetch("/site/leave/leaveProcessor/"+r.valueReference.reference.split("/")[1]).then((e=>e.json().then((e=>{this.thirdLevelApproval.user.name=e.name}))))),await this.getFourthLevelApproval(),e()}else this.thirdLevelApproval.id="",this.fourthLevelApproval.id="",e()}))))}))},getFourthLevelApproval(){return new Promise((e=>{if("unpaidauthorized"!==this.leaveRequest.categoryid||"unpaidauthorized"==this.leaveRequest.categoryid&&this.leaveRequest.days<90)return this.fourthLevelApproval.id="",e();this.fourthLevelApproval.title="ED Approval";let t={_profile:"http://ihris.org/fhir/StructureDefinition/ed-leave-approval-profile",leaverequest:"Basic/"+this.queries.id,_sort:"_lastUpdated"};fetch("/fhir/Basic?"+a.stringify(t)).then((t=>t.json().then((async t=>{if(t.entry&&t.entry.length){this.fourthLevelApproval.id=t.entry[0].resource.id,this.fourthLevelApproval.status=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ed-leave-status"===e.url)).valueCoding.display,this.fourthLevelApproval.statuscode=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/ed-leave-status"===e.url)).valueCoding.code,this.fourthLevelApproval.date=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/action-date"===e.url)).valueDate;let s=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/description"===e.url));s&&(this.fourthLevelApproval.description=s.valueString);let r=t.entry[0].resource.extension.find((e=>"http://ihris.org/fhir/StructureDefinition/user-reference"===e.url));r?(this.fourthLevelApproval.user.id=r.valueReference.reference,fetch("/site/leave/leaveProcessor/"+r.valueReference.reference.split("/")[1]).then((t=>t.json().then((t=>{this.fourthLevelApproval.user.name=t.name,e()}))))):e()}else this.fourthLevelApproval.id="",e()}))))}))},createCarryForwardRequest(){this.overlayUnclosed=!0,fetch("/site/leave/createCarryRequest/"+this.practitionerId,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual",body:JSON.stringify(this.annualLeave)}).then((e=>{this.overlayUnclosed=!1,this.carryForwardDialog=!1,201===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Request Created Successfully"}),e.json().then((e=>{this.getLeave(),this.populateCarryForward(e)}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})})).catch((()=>{this.overlayUnclosed=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})}))},createCarryForwardAction(){this.overlayUnclosed=!0,fetch("/site/leave/createCarryAction/"+this.carryForwardRequest.id+"/"+this.requestAction,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual"}).then((e=>{this.requestAction="",this.overlayUnclosed=!1,this.carryForwardActionDialog=!1,200===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Action Added Successfully"}),e.json().then((e=>{this.populateCarryForward(e),this.getLeaveDetails()}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})})).catch((()=>{this.overlayUnclosed=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})}))},createSpecialStudyExtensionReq(){this.overlayUnclosed=!0;let e=JSON.parse(JSON.stringify(this.leaveRequest));e.extensionDate=this.extensionDate,e.extensionReason=this.extensionReason,fetch("/site/leave/createSpecialStudyExtensionRequest/"+this.practitionerId,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual",body:JSON.stringify(e)}).then((e=>{this.overlayUnclosed=!1,this.specialStudyExtendDialog=!1,201===e.status?(this.$store.commit("setMessage",{type:"success",text:"Extension Request Created Successfully"}),e.json().then((e=>{this.getLeave(),this.populateSpecialStudyExtensionReq(e)}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Create Extension Request."})})).catch((()=>{this.overlayUnclosed=!1,this.specialStudyExtendDialog=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Create Carry Forward Request."})}))},createSpecialStudyExtensionAction(){this.overlayUnclosed=!0,fetch("/site/leave/createSpecialStudyExtensionAction/"+this.specialStudyExtensionRequest.id+"/"+this.requestAction,{method:"POST",headers:{"Content-Type":"application/json"},redirect:"manual"}).then((e=>{this.requestAction="",this.overlayUnclosed=!1,this.specialStudyExtensionActionDialog=!1,200===e.status?(this.$store.commit("setMessage",{type:"success",text:"Carry Forward Action Added Successfully"}),e.json().then((()=>{this.getLeaveDetails()}))):this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})})).catch((()=>{this.overlayUnclosed=!1,this.specialStudyExtensionActionDialog=!1,this.$store.commit("setMessage",{type:"error",text:"Failed To Add Carry Forward Action."})}))}},created(){this.getLeave()},components:{"leave-request-stepper":()=>s.e(9349).then(s.bind(s,9349)),"special-study-leave-request-stepper":()=>s.e(3770).then(s.bind(s,3770))}},n=o,l=s(3736),c=s(3453),u=s.n(c),v=s(3150),d=s(2371),p=s(7118),h=s(2102),f=s(4228),y=s(865),g=s(9771),x=s(4497),w=s(1418),A=s(6428),m=s(6816),S=s(7620),q=s(1152),D=s(5132),_=s(1058),R=s(624),C=s(2877),L=s(3986),b=s(9762),F=s(5978),E=s(4350),j=s(6656),k=(0,l.Z)(n,r,i,!1,null,null,null),P=k.exports;u()(k,{VBtn:v.Z,VCard:d.Z,VCardActions:p.h7,VCardText:p.ZB,VCardTitle:p.EB,VCol:h.Z,VContainer:f.Z,VDataTable:y.Z,VDatePicker:g.Z,VDialog:x.Z,VDivider:w.Z,VIcon:A.Z,VList:m.Z,VListItem:S.Z,VMenu:q.Z,VNavigationDrawer:D.Z,VOverlay:_.Z,VProgressCircular:R.Z,VRow:C.Z,VSelect:L.Z,VSpacer:b.Z,VTextField:F.Z,VTextarea:E.Z,VToolbar:j.Z})}}]);
//# sourceMappingURL=6772.4332867e.js.map